{% extends 'base.html.twig' %}

{% block title %}Modifier l'article - FadelArt{% endblock %}

{% block body %}
<style>
    .edit-container {
        padding: 40px 0;
        background: #f8f9fa;
        min-height: calc(100vh - 200px);
    }
    
    .form-card {
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        padding: 40px;
        max-width: 700px;
        margin: 0 auto;
    }
    
    .form-title {
        font-size: 2.5rem;
        font-weight: 700;
        color: #2d3748;
        margin-bottom: 10px;
        text-align: center;
    }
    
    .form-subtitle {
        text-align: center;
        color: #718096;
        margin-bottom: 30px;
        font-size: 1.1rem;
    }
    
    .current-image {
        text-align: center;
        margin-bottom: 30px;
        padding: 20px;
        background: #f7fafc;
        border-radius: 10px;
    }
    
    .current-image img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        object-fit: contain;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        display: block;
        margin: 0 auto;
    }
    
    .current-image-label {
        font-weight: 600;
        color: #4a5568;
        margin-bottom: 15px;
        display: block;
    }
    
    .form-group {
        margin-bottom: 25px;
    }
    
    .form-label {
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 8px;
        display: block;
    }
    
    .form-control, .form-select {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        font-size: 1rem;
        transition: all 0.3s;
    }
    
    .form-control:focus, .form-select:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        outline: none;
    }
    
    textarea.form-control {
        resize: vertical;
        min-height: 120px;
    }
    
    .form-actions {
        display: flex;
        gap: 15px;
        margin-top: 30px;
        justify-content: center;
    }
    
    .btn-submit {
        padding: 14px 40px;
        background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);
        color: white;
        border: none;
        border-radius: 50px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .btn-submit:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(246, 173, 85, 0.3);
    }
    
    .btn-cancel {
        padding: 14px 40px;
        background: #e2e8f0;
        color: #4a5568;
        border: none;
        border-radius: 50px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        text-decoration: none;
        display: inline-block;
    }
    
    .btn-cancel:hover {
        background: #cbd5e0;
        color: #2d3748;
        transform: translateY(-2px);
    }
    
    .file-upload-info {
        font-size: 0.9rem;
        color: #718096;
        margin-top: 5px;
    }
</style>

<div class="edit-container">
    <div class="container">
        <div class="form-card">
            <h1 class="form-title">Modifier l'article</h1>
            <p class="form-subtitle">{{ article.title }}</p>
            
            {% if article.imageName %}
                <div class="current-image">
                    <span class="current-image-label">
                        <i class="fas fa-image me-2"></i>Image actuelle
                    </span>
                    <img src="{{ vich_uploader_asset(article, 'imageFile') }}" 
                         alt="{{ article.title }}">
                </div>
            {% endif %}
            
            {{ form_start(form) }}
            
                <div class="form-group">
                    {{ form_label(form.title, 'Titre de l\'œuvre', {'label_attr': {'class': 'form-label'}}) }}
                    {{ form_widget(form.title, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.title) }}
                </div>
                
                <div class="form-group">
                    {{ form_label(form.artist, 'Nom de l\'artiste', {'label_attr': {'class': 'form-label'}}) }}
                    {{ form_widget(form.artist, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.artist) }}
                </div>
                
                <div class="form-group">
                    {{ form_label(form.category, 'Catégorie', {'label_attr': {'class': 'form-label'}}) }}
                    {{ form_widget(form.category, {'attr': {'class': 'form-select'}}) }}
                    {{ form_errors(form.category) }}
                </div>
                
                <div class="form-group">
                    {{ form_label(form.description, 'Description', {'label_attr': {'class': 'form-label'}}) }}
                    {{ form_widget(form.description, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.description) }}
                </div>
                
                <div class="form-group">
                    {{ form_label(form.imageFile, 'Changer l\'image (optionnel)', {'label_attr': {'class': 'form-label'}}) }}
                    {{ form_widget(form.imageFile, {'attr': {'class': 'form-control'}}) }}
                    {{ form_errors(form.imageFile) }}
                    <div class="file-upload-info">
                        <i class="fas fa-info-circle me-1"></i>
                        Laissez vide pour conserver l'image actuelle
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn-submit">
                        <i class="fas fa-save me-2"></i> Enregistrer les modifications
                    </button>
                    <a href="{{ path('user_article_index') }}" class="btn-cancel">
                        <i class="fas fa-times me-2"></i> Annuler
                    </a>
                </div>
                
            {{ form_end(form) }}
        </div>
    </div>
</div>

{% endblock %}